{"ast":null,"code":"var _jsxFileName = \"/home/shkwon/Projects/Learn_Ethereum/chapter10/DigitalArtERC721Token/dapp/src/PublishArt.js\";\nimport React from 'react';\nimport './App.css';\nimport AppNav from \"./AppNav\";\nimport { getWeb3, getInstance } from \"./Web3Util\";\n/**\n * @App Build Decentralized Art Market using ERC-721\n * @Util Publish artwork\n * @Book Learn Ethereum \n * @author brian wu\n */\n\nclass PublishArt extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      const web3 = await getWeb3();\n      window.web3 = web3;\n      const contractInstance = await getInstance(web3);\n      window.user = (await web3.eth.getAccounts())[0];\n      const balanceInWei = await web3.eth.getBalance(window.user);\n      var balance = web3.utils.fromWei(balanceInWei, 'ether');\n      const networkId = await web3.eth.net.getId();\n      const networkType = await web3.eth.net.getNetworkType();\n      this.setState({\n        user: window.user\n      });\n      this.setState({\n        balance: balance\n      });\n      this.setState({\n        contractInstance: contractInstance\n      });\n      this.setState({\n        networkId: networkId\n      });\n      this.setState({\n        networkType: networkType\n      });\n    };\n\n    this.imageChange = event => {\n      this.setState({\n        imageValue: event.target.value\n      });\n    };\n\n    this.categoryChange = event => {\n      this.setState({\n        categoryValue: event.target.value\n      });\n    };\n\n    this.submitHandler = event => {\n      event.preventDefault();\n      const _this$state = this.state,\n            imageValue = _this$state.imageValue,\n            description = _this$state.description,\n            title = _this$state.title,\n            authorName = _this$state.authorName,\n            price = _this$state.price,\n            date = _this$state.date;\n\n      if (this.isNotEmpty(title) && this.isNotEmpty(description) && this.isNotEmpty(authorName) && this.isNotEmpty(date) && this.isNotEmpty(imageValue) && this.isNotEmpty(price)) {\n        const priceInWei = window.web3.utils.toWei(price, 'ether');\n        this.publishArt(title, description, date, authorName, priceInWei, imageValue);\n      }\n    };\n\n    this.changeHandler = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      }, function () {});\n    };\n\n    this.imageChange = this.imageChange.bind(this);\n    this.submitHandler = this.submitHandler.bind(this);\n    this.changeHandler = this.changeHandler.bind(this);\n    this.state = {\n      imageValue: 'images/a-moment-of-silence.png',\n      description: '',\n      title: '',\n      authorName: '',\n      price: 0,\n      date: '',\n      user: '',\n      balance: 0,\n      contractInstance: '',\n      networkId: '',\n      networkType: ''\n    };\n  }\n\n  isNotEmpty(val) {\n    return val && val.length > 0;\n  }\n\n  async publishArt(title, description, date, authorName, price, imageValue) {\n    try {\n      await this.state.contractInstance.methods.createTokenAndSellArt(title, description, date, authorName, price, imageValue).send({\n        from: this.state.user\n      });\n      this.props.history.push(\"/home\");\n      window.location.reload();\n    } catch (e) {\n      console.log('Error', e);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(AppNav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"mx-auto\",\n      style: {\n        marginTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-2 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-md-8 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"text-center border border-light p-5\",\n      onSubmit: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h4 mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Submit your digital art today.\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"title\",\n      name: \"title\",\n      type: \"text\",\n      placeholder: \"Title\",\n      onChange: this.changeHandler,\n      value: this.state.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"description\",\n      name: \"description\",\n      type: \"text\",\n      placeholder: \"Description\",\n      onChange: this.changeHandler,\n      value: this.state.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"authorName\",\n      name: \"authorName\",\n      type: \"text\",\n      placeholder: \"Author Name\",\n      onChange: this.changeHandler,\n      value: this.state.authorName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-6 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"price\",\n      name: \"price\",\n      type: \"text\",\n      placeholder: \"Price (ether)\",\n      onChange: this.changeHandler,\n      value: this.state.price,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"date\",\n      name: \"date\",\n      type: \"text\",\n      placeholder: \"Date\",\n      onChange: this.changeHandler,\n      value: this.state.date,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      className: \"browser-default custom-select\",\n      onChange: this.imageChange,\n      value: this.state.imageValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"images/a-moment-of-silence.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"images/a-moment-of-silence.png\"), React.createElement(\"option\", {\n      value: \"images/Finchwing.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"images/Finchwing.png\"), React.createElement(\"option\", {\n      value: \"images/girl-and-bird.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"images/girl-and-bird.png\"), React.createElement(\"option\", {\n      value: \"images/kitty.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"images/kitty.png\"), React.createElement(\"option\", {\n      value: \"images/margay-cat.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"images/margay-cat.png\"), React.createElement(\"option\", {\n      value: \"images/Nighthill.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"images/Nighthill.png\"), React.createElement(\"option\", {\n      value: \"images/storm.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"images/storm.png\")), React.createElement(\"img\", {\n      className: \"imgBox z-depth-4 rounded\",\n      alt: \"art\",\n      src: this.state.imageValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-5 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-md-2 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-info btn-block\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Publish\")), React.createElement(\"div\", {\n      className: \"col-md-5 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      className: \"col-md-2 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default PublishArt;","map":{"version":3,"sources":["/home/shkwon/Projects/Learn_Ethereum/chapter10/DigitalArtERC721Token/dapp/src/PublishArt.js"],"names":["React","AppNav","getWeb3","getInstance","PublishArt","Component","constructor","props","componentDidMount","web3","window","contractInstance","user","eth","getAccounts","balanceInWei","getBalance","balance","utils","fromWei","networkId","net","getId","networkType","getNetworkType","setState","imageChange","event","imageValue","target","value","categoryChange","categoryValue","submitHandler","preventDefault","state","description","title","authorName","price","date","isNotEmpty","priceInWei","toWei","publishArt","changeHandler","name","bind","val","length","methods","createTokenAndSellArt","send","from","history","push","location","reload","e","console","log","render","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport AppNav from \"./AppNav\";\nimport { getWeb3, getInstance}  from \"./Web3Util\";\n/**\n * @App Build Decentralized Art Market using ERC-721\n * @Util Publish artwork\n * @Book Learn Ethereum \n * @author brian wu\n */\nclass PublishArt extends React.Component {\n    constructor(props) {\n      super(props);\n      this.imageChange = this.imageChange.bind(this);\n      this.submitHandler = this.submitHandler.bind(this);\n      this.changeHandler = this.changeHandler.bind(this);\n      this.state = { \n            imageValue: 'images/a-moment-of-silence.png',\n            description: '',\n            title: '', \n            authorName: '',\n            price: 0,\n            date:'',\n            user: '',\n            balance: 0,\n            contractInstance: '',\n            networkId:'',\n            networkType:'',\n        };\n    }\n    componentDidMount = async () => {\n        const web3 = await getWeb3();\n        window.web3 = web3;\n        const contractInstance = await getInstance(web3);\n        window.user = (await web3.eth.getAccounts())[0];\n        const balanceInWei = await web3.eth.getBalance(window.user);\n        var balance = web3.utils.fromWei(balanceInWei, 'ether');\n        const networkId = await web3.eth.net.getId();\n        const networkType = await web3.eth.net.getNetworkType();\n        this.setState({ user: window.user });\n        this.setState({ balance: balance});\n        this.setState({ contractInstance: contractInstance });\n        this.setState({ networkId: networkId});\n        this.setState({ networkType: networkType});\n      }\n    imageChange = (event) => {\n        this.setState({ imageValue: event.target.value });\n    };\n    categoryChange = (event) => {\n        this.setState({ categoryValue: event.target.value });\n    };\n    submitHandler = (event) => {\n        event.preventDefault();\n        const {  imageValue, description, title, authorName, price, date} = this.state;\n        if(this.isNotEmpty(title) &&this.isNotEmpty(description) &&this.isNotEmpty(authorName) \n            &&this.isNotEmpty(date)&&this.isNotEmpty(imageValue) && this.isNotEmpty(price)) {\n            const priceInWei =  window.web3.utils.toWei(price, 'ether');\n            this.publishArt(title, description, date, authorName, priceInWei, imageValue);  \n        }\n    };\n    isNotEmpty(val) {\n        return val&& val.length>0;\n    }\n    changeHandler = event => {\n        this.setState({\n            [event.target.name]: event.target.value\n            }, function(){ })\n    };\n    async publishArt(title, description, date, authorName, price, imageValue) {\n        try {\n            await this.state.contractInstance.methods.createTokenAndSellArt(title,description, date, authorName, price, imageValue).send({\n                from: this.state.user\n            })\n            this.props.history.push(`/home`)\n            window.location.reload(); \n        } catch (e) {console.log('Error', e)}\n\n    }\n    render() {\n      return (\n        <div>\n            <AppNav></AppNav>\n            <section className=\"mx-auto\" style={{ marginTop: '20px'}}>\n                <div className=\"row\">\n                    <div className=\"col-md-2 mb-md-0 mb-5\"></div>\n                    <div className=\"col-md-8 mb-md-0 mb-5\">\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <form className=\"text-center border border-light p-5\" onSubmit={this.submitHandler}>\n                                    <p className=\"h4 mb-4\">Submit your digital art today.</p>\n                                    <div className=\"row\">\n                                        <div className=\"col-md-6 mb-md-0 mb-5\">\n                                            <input className=\"form-control mb-4\" id=\"title\" name=\"title\" type=\"text\" placeholder=\"Title\" onChange={this.changeHandler}  value={this.state.title}/>\n                                            <input className=\"form-control mb-4\" id=\"description\" name=\"description\"  type=\"text\" placeholder=\"Description\" onChange={this.changeHandler}  value={this.state.description}/>\n                                           <input className=\"form-control mb-4\" id=\"authorName\" name=\"authorName\" type=\"text\" placeholder=\"Author Name\" onChange={this.changeHandler}  value={this.state.authorName}/>\n\n                                        </div>\n                                        <div className=\"col-md-6 mb-md-0 mb-5\">\n                                           <input className=\"form-control mb-4\" id=\"price\" name=\"price\"  type=\"text\" placeholder=\"Price (ether)\"  onChange={this.changeHandler}  value={this.state.price}/>\n                                           <input className=\"form-control mb-4\" id=\"date\" name=\"date\"  type=\"text\" placeholder=\"Date\" onChange={this.changeHandler}   value={this.state.date}/>\n                                            <select className=\"browser-default custom-select\" onChange={this.imageChange} value={this.state.imageValue}>\n                                                    <option value=\"images/a-moment-of-silence.png\">images/a-moment-of-silence.png</option>\n                                                    <option value=\"images/Finchwing.png\">images/Finchwing.png</option>\n                                                    <option value=\"images/girl-and-bird.png\">images/girl-and-bird.png</option>\n                                                    <option value=\"images/kitty.png\">images/kitty.png</option>\n                                                    <option value=\"images/margay-cat.png\">images/margay-cat.png</option>\n                                                    <option value=\"images/Nighthill.png\">images/Nighthill.png</option>\n                                                    <option value=\"images/storm.png\">images/storm.png</option>\n                                            </select>\n                                            <img className=\"imgBox z-depth-4 rounded\" alt=\"art\" src={this.state.imageValue} />\n                                        </div>\n                                    </div>\n                                    <div className=\"row\">\n                                        <div className=\"col-md-5 mb-md-0 mb-5\"></div>\n                                        <div className=\"col-md-2 mb-md-0 mb-5\"><button className=\"btn btn-info btn-block\" type=\"submit\">Publish</button></div>\n                                        <div className=\"col-md-5 mb-md-0 mb-5\"></div>\n                                    </div>\n                                    \n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-md-2 mb-md-0 mb-5\"></div>\n                </div>\n\n            </section>\n        </div>\n\n      );\n    }\n  }\n  export default PublishArt;"]},"metadata":{},"sourceType":"module"}