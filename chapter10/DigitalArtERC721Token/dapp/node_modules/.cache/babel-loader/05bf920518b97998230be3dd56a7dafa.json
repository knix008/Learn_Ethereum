{"ast":null,"code":"var _jsxFileName = \"/home/shkwon/Projects/Learn_Ethereum/chapter10/DigitalArtERC721Token/dapp/src/PublishArt.js\";\nimport React from 'react';\nimport './App.css';\nimport AppNav from \"./AppNav\";\nimport { getWeb3, getInstance } from \"./Web3Util\";\n\nclass PublishArt extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      const web3 = await getWeb3();\n      window.web3 = web3;\n      const contractInstance = await getInstance(web3);\n      window.user = (await web3.eth.getAccounts())[0];\n      const balanceInWei = await web3.eth.getBalance(window.user);\n      var balance = web3.utils.fromWei(balanceInWei, 'ether');\n      const networkId = await web3.eth.net.getId();\n      const networkType = await web3.eth.net.getNetworkType();\n      this.setState({\n        user: window.user\n      });\n      this.setState({\n        balance: balance\n      });\n      this.setState({\n        contractInstance: contractInstance\n      });\n      this.setState({\n        networkId: networkId\n      });\n      this.setState({\n        networkType: networkType\n      });\n    };\n\n    this.imageChange = event => {\n      this.setState({\n        imageValue: event.target.value\n      });\n    };\n\n    this.categoryChange = event => {\n      this.setState({\n        categoryValue: event.target.value\n      });\n    };\n\n    this.submitHandler = event => {\n      event.preventDefault();\n      const _this$state = this.state,\n            imageValue = _this$state.imageValue,\n            description = _this$state.description,\n            title = _this$state.title,\n            authorName = _this$state.authorName,\n            price = _this$state.price,\n            date = _this$state.date;\n\n      if (this.isNotEmpty(title) && this.isNotEmpty(description) && this.isNotEmpty(authorName) && this.isNotEmpty(date) && this.isNotEmpty(imageValue) && this.isNotEmpty(price)) {\n        const priceInWei = window.web3.utils.toWei(price, 'ether');\n        this.publishArt(title, description, date, authorName, priceInWei, imageValue);\n      }\n    };\n\n    this.changeHandler = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      }, function () {});\n    };\n\n    this.imageChange = this.imageChange.bind(this);\n    this.submitHandler = this.submitHandler.bind(this);\n    this.changeHandler = this.changeHandler.bind(this);\n    this.state = {\n      imageValue: 'images/a-moment-of-silence.png',\n      description: '',\n      title: '',\n      authorName: '',\n      price: 0,\n      date: '',\n      user: '',\n      balance: 0,\n      contractInstance: '',\n      networkId: '',\n      networkType: ''\n    };\n  }\n\n  isNotEmpty(val) {\n    return val && val.length > 0;\n  }\n\n  async publishArt(title, description, date, authorName, price, imageValue) {\n    try {\n      await this.state.contractInstance.methods.createTokenAndSellArt(title, description, date, authorName, price, imageValue).send({\n        from: this.state.user\n      });\n      this.props.history.push(\"/home\");\n      window.location.reload();\n    } catch (e) {\n      console.log('Error', e);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(AppNav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"mx-auto\",\n      style: {\n        marginTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-2 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-md-8 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"text-center border border-light p-5\",\n      onSubmit: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h4 mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Submit your digital art today.\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"title\",\n      name: \"title\",\n      type: \"text\",\n      placeholder: \"Title\",\n      onChange: this.changeHandler,\n      value: this.state.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"description\",\n      name: \"description\",\n      type: \"text\",\n      placeholder: \"Description\",\n      onChange: this.changeHandler,\n      value: this.state.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"authorName\",\n      name: \"authorName\",\n      type: \"text\",\n      placeholder: \"Author Name\",\n      onChange: this.changeHandler,\n      value: this.state.authorName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-6 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"price\",\n      name: \"price\",\n      type: \"text\",\n      placeholder: \"Price (ether)\",\n      onChange: this.changeHandler,\n      value: this.state.price,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"form-control mb-4\",\n      id: \"date\",\n      name: \"date\",\n      type: \"text\",\n      placeholder: \"Date\",\n      onChange: this.changeHandler,\n      value: this.state.date,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      className: \"browser-default custom-select\",\n      onChange: this.imageChange,\n      value: this.state.imageValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"images/a-moment-of-silence.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"images/a-moment-of-silence.png\"), React.createElement(\"option\", {\n      value: \"images/Finchwing.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"images/Finchwing.png\"), React.createElement(\"option\", {\n      value: \"images/girl-and-bird.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"images/girl-and-bird.png\"), React.createElement(\"option\", {\n      value: \"images/kitty.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"images/kitty.png\"), React.createElement(\"option\", {\n      value: \"images/margay-cat.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"images/margay-cat.png\"), React.createElement(\"option\", {\n      value: \"images/Nighthill.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"images/Nighthill.png\"), React.createElement(\"option\", {\n      value: \"images/storm.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"images/storm.png\")), React.createElement(\"img\", {\n      className: \"imgBox z-depth-4 rounded\",\n      alt: \"art\",\n      src: this.state.imageValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-5 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-md-2 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-info btn-block\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Publish\")), React.createElement(\"div\", {\n      className: \"col-md-5 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      className: \"col-md-2 mb-md-0 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default PublishArt;","map":{"version":3,"sources":["/home/shkwon/Projects/Learn_Ethereum/chapter10/DigitalArtERC721Token/dapp/src/PublishArt.js"],"names":["React","AppNav","getWeb3","getInstance","PublishArt","Component","constructor","props","componentDidMount","web3","window","contractInstance","user","eth","getAccounts","balanceInWei","getBalance","balance","utils","fromWei","networkId","net","getId","networkType","getNetworkType","setState","imageChange","event","imageValue","target","value","categoryChange","categoryValue","submitHandler","preventDefault","state","description","title","authorName","price","date","isNotEmpty","priceInWei","toWei","publishArt","changeHandler","name","bind","val","length","methods","createTokenAndSellArt","send","from","history","push","location","reload","e","console","log","render","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport AppNav from \"./AppNav\";\nimport { getWeb3, getInstance } from \"./Web3Util\";\n\nclass PublishArt extends React.Component {\n    constructor(props) {\n        super(props);\n        this.imageChange = this.imageChange.bind(this);\n        this.submitHandler = this.submitHandler.bind(this);\n        this.changeHandler = this.changeHandler.bind(this);\n        this.state = {\n            imageValue: 'images/a-moment-of-silence.png',\n            description: '',\n            title: '',\n            authorName: '',\n            price: 0,\n            date: '',\n            user: '',\n            balance: 0,\n            contractInstance: '',\n            networkId: '',\n            networkType: '',\n        };\n    }\n    componentDidMount = async () => {\n        const web3 = await getWeb3();\n        window.web3 = web3;\n        const contractInstance = await getInstance(web3);\n        window.user = (await web3.eth.getAccounts())[0];\n        const balanceInWei = await web3.eth.getBalance(window.user);\n        var balance = web3.utils.fromWei(balanceInWei, 'ether');\n        const networkId = await web3.eth.net.getId();\n        const networkType = await web3.eth.net.getNetworkType();\n        this.setState({ user: window.user });\n        this.setState({ balance: balance });\n        this.setState({ contractInstance: contractInstance });\n        this.setState({ networkId: networkId });\n        this.setState({ networkType: networkType });\n    }\n    imageChange = (event) => {\n        this.setState({ imageValue: event.target.value });\n    };\n    categoryChange = (event) => {\n        this.setState({ categoryValue: event.target.value });\n    };\n    submitHandler = (event) => {\n        event.preventDefault();\n        const { imageValue, description, title, authorName, price, date } = this.state;\n        if (this.isNotEmpty(title) && this.isNotEmpty(description) && this.isNotEmpty(authorName)\n            && this.isNotEmpty(date) && this.isNotEmpty(imageValue) && this.isNotEmpty(price)) {\n            const priceInWei = window.web3.utils.toWei(price, 'ether');\n            this.publishArt(title, description, date, authorName, priceInWei, imageValue);\n        }\n    };\n    isNotEmpty(val) {\n        return val && val.length > 0;\n    }\n    changeHandler = event => {\n        this.setState({\n            [event.target.name]: event.target.value\n        }, function () { })\n    };\n    async publishArt(title, description, date, authorName, price, imageValue) {\n        try {\n            await this.state.contractInstance.methods.createTokenAndSellArt(title, description, date, authorName, price, imageValue).send({\n                from: this.state.user\n            })\n            this.props.history.push(`/home`)\n            window.location.reload();\n        } catch (e) { console.log('Error', e) }\n\n    }\n    render() {\n        return (\n            <div>\n                <AppNav></AppNav>\n                <section className=\"mx-auto\" style={{ marginTop: '20px' }}>\n                    <div className=\"row\">\n                        <div className=\"col-md-2 mb-md-0 mb-5\"></div>\n                        <div className=\"col-md-8 mb-md-0 mb-5\">\n                            <div className=\"card\">\n                                <div className=\"card-body\">\n                                    <form className=\"text-center border border-light p-5\" onSubmit={this.submitHandler}>\n                                        <p className=\"h4 mb-4\">Submit your digital art today.</p>\n                                        <div className=\"row\">\n                                            <div className=\"col-md-6 mb-md-0 mb-5\">\n                                                <input className=\"form-control mb-4\" id=\"title\" name=\"title\" type=\"text\" placeholder=\"Title\" onChange={this.changeHandler} value={this.state.title} />\n                                                <input className=\"form-control mb-4\" id=\"description\" name=\"description\" type=\"text\" placeholder=\"Description\" onChange={this.changeHandler} value={this.state.description} />\n                                                <input className=\"form-control mb-4\" id=\"authorName\" name=\"authorName\" type=\"text\" placeholder=\"Author Name\" onChange={this.changeHandler} value={this.state.authorName} />\n\n                                            </div>\n                                            <div className=\"col-md-6 mb-md-0 mb-5\">\n                                                <input className=\"form-control mb-4\" id=\"price\" name=\"price\" type=\"text\" placeholder=\"Price (ether)\" onChange={this.changeHandler} value={this.state.price} />\n                                                <input className=\"form-control mb-4\" id=\"date\" name=\"date\" type=\"text\" placeholder=\"Date\" onChange={this.changeHandler} value={this.state.date} />\n                                                <select className=\"browser-default custom-select\" onChange={this.imageChange} value={this.state.imageValue}>\n                                                    <option value=\"images/a-moment-of-silence.png\">images/a-moment-of-silence.png</option>\n                                                    <option value=\"images/Finchwing.png\">images/Finchwing.png</option>\n                                                    <option value=\"images/girl-and-bird.png\">images/girl-and-bird.png</option>\n                                                    <option value=\"images/kitty.png\">images/kitty.png</option>\n                                                    <option value=\"images/margay-cat.png\">images/margay-cat.png</option>\n                                                    <option value=\"images/Nighthill.png\">images/Nighthill.png</option>\n                                                    <option value=\"images/storm.png\">images/storm.png</option>\n                                                </select>\n                                                <img className=\"imgBox z-depth-4 rounded\" alt=\"art\" src={this.state.imageValue} />\n                                            </div>\n                                        </div>\n                                        <div className=\"row\">\n                                            <div className=\"col-md-5 mb-md-0 mb-5\"></div>\n                                            <div className=\"col-md-2 mb-md-0 mb-5\"><button className=\"btn btn-info btn-block\" type=\"submit\">Publish</button></div>\n                                            <div className=\"col-md-5 mb-md-0 mb-5\"></div>\n                                        </div>\n\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-md-2 mb-md-0 mb-5\"></div>\n                    </div>\n\n                </section>\n            </div>\n\n        );\n    }\n}\nexport default PublishArt;"]},"metadata":{},"sourceType":"module"}